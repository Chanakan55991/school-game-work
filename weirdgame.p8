pico-8 cartridge // http://www.pico-8.com
version 38
__lua__

function _draw()
	cls()
	
	palt(0, false)
	palt(1,true)
	map(0, 0, 0, 0, 128, 32)
	spr(player.sprite, player.x, player.y, 1, 1, player.flip)
	palt(0, true)
	spr(9, 64, 64)
	
--	for i=0,15 do
--			pal(i,i+128,1)
--	end
end	 

function _init()
	 player = {}
	 player.x = 5
	 player.y = 48
	 player.sprite = 7
	 player.speed = 2
	 player.flip = false
	 player.dead = false
end

function move()
		player.moving = true
		player.sprite += 0.125
		if player.sprite > 4 then
				player.sprite = 1
				
		end
end

-- game logic loop
function _update()
	 if not player.moving then
	 		if player.sprite < 7 then
	 				player.sprite = 7
	 		end
	 		
	 		player.sprite += 0.0625
	 		if player.sprite > 8 then
	 				player.sprite = 7
	 	 end
	 end
	 
		if not player.dead then
				player.moving = false
		else
				reload(0x1000, 0x1000, 0x2000)
				_init()
		end
		
		if btn(0) then
				player.x -= player.speed
				player.flip = true
				move()
		end
		
		if btn(1) then
				player.x += player.speed
				player.flip = false
				move()
		end
		
		if btn(2) then
				player.y -= player.speed
				player.flip = true
				move()
		end
		
		if btn(3) then
				player.y += player.speed
				player.flip = true
				move()
		end
		
		if player.x == 64 and player.y == 64 then
				player.dead = true
		end
		
		player.x = mid(0, player.x, 120)
		player.y = mid(0, player.y, 64)
end

__gfx__
00000000117777111177771111777711117777113333333322222222117777111177771100000000000000000000000000000000000000000000000000000000
00000000177777711777777117777771177777713433334324444442177777711777777100000000000000000000000000000000000000000000000000000000
00700700770770777770770777777777777777773333333322222442770770777777777700000000000000000000000000000000000000000000000000000000
00077000770770777770770777707707770770773343433324222442770770777777777780808080000000000000000000000000000000000000000000000000
00077000777777777777777777707707770770773333334322244442777777777707707780808080000000000000000000000000000000000000000000000000
00700700777777777777777777777777777777773333333324422222777777777777777780808080000000000000000000000000000000000000000000000000
00000000177777771777777717777777177777773343333324444422177777771777777788080808000000000000000000000000000000000000000000000000
00000000117777111177771111777711117777114433333322222222117777111177771108080808000000000000000000000000000000000000000000000000
__map__
0505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
